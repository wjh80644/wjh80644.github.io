"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[477],{10:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"React\u81ea\u5b9a\u4e49hook","metadata":{"permalink":"/blog/React\u81ea\u5b9a\u4e49hook","source":"@site/blog/2023-07-30-\u81ea\u5b9a\u4e49hook.md","title":"React\u81ea\u5b9a\u4e49hook","description":"\u81ea\u5b9a\u4e49hook","date":"2023-07-30T00:00:00.000Z","formattedDate":"2023\u5e747\u670830\u65e5","tags":[{"label":"react","permalink":"/blog/tags/react"},{"label":"hook","permalink":"/blog/tags/hook"}],"readingTime":2.01,"hasTruncateMarker":true,"authors":[{"name":"Wjh","url":"https://github.com/wjh80644","image_url":"https://avatars.githubusercontent.com/u/81220304?s=400&v=4","imageURL":"https://avatars.githubusercontent.com/u/81220304?s=400&v=4"}],"frontMatter":{"slug":"React\u81ea\u5b9a\u4e49hook","title":"React\u81ea\u5b9a\u4e49hook","authors":{"name":"Wjh","url":"https://github.com/wjh80644","image_url":"https://avatars.githubusercontent.com/u/81220304?s=400&v=4","imageURL":"https://avatars.githubusercontent.com/u/81220304?s=400&v=4"},"tags":["react","hook"]}},"content":"## \u81ea\u5b9a\u4e49hook\\n```\\n// \u4f7f\u7528\u81ea\u5b9a\u4e49hook\u6765\u590d\u7528\u4ee3\u7801\u903b\u8f91\\nimport { useEffect, useState } from \\"react\\";\\n\\nfunction useWindowSize() {\\n  const [windowSize, setWindowSize] = useState({\\n    width: window.innerWidth,\\n    height: window.innerHeight,\\n  });\\n\x3c!--truncate--\x3e\\n  useEffect(() => {\\n    const handleResize = () => {\\n      setWindowSize({\\n        width: window.innerWidth,\\n        height: window.innerHeight,\\n      });\\n    };\\n    // \u6d4f\u89c8\u5668\u7a97\u53e3\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u6539\u53d8windowSize\\n    window.addEventListener(\\"resize\\", handleResize);\\n    return () => {\\n      window.removeEventListener(\\"resize\\", handleResize);\\n    };\\n  }, []);\\n  // hook\u91cc\u9762\u8fd4\u56de\u4e00\u4e2a\u72b6\u6001\u3001\u51fd\u6570\u6216\u6570\u7ec4\\n  return windowSize;\\n}\\n\\nexport default useWindowSize;\\n// --------------------------------------------\\nimport { useEffect, useState } from \\"react\\";\\nimport \\"./App.css\\";\\nimport useWindowSize from \\"./hooks/useWindowSize\\";\\n\\nfunction App() {\\n  const windowSize = useWindowSize();\\n\\n  return (\\n    <main className=\\"container\\">\\n      <div>\\n        <h1>Width: {windowSize.width}</h1>\\n        <h1>Height: {windowSize.height}</h1>\\n      </div>\\n    </main>\\n  );\\n}\\n\\nexport default App;\\n```\\n## \u7ed9hook\u6dfb\u52a0\u53c2\u6570\\n```\\nimport { useEffect, useState } from \\"react\\";\\n\\nfunction useWindowSize(throttleDuration = 100) {\\n  const [windowSize, setWindowSize] = useState({\\n    width: window.innerWidth,\\n    height: window.innerHeight,\\n  });\\n\\n  useEffect(() => {\\n    let timeoutId = null;\\n    const handleResize = () => {\\n      if (!timeoutId) {\\n        timeoutId = setTimeout(() => {\\n          setWindowSize({\\n            width: window.innerWidth,\\n            height: window.innerHeight,\\n          });\\n          timeoutId = null;\\n        }, throttleDuration);\\n      }\\n    };\\n\\n    window.addEventListener(\\"resize\\", handleResize);\\n    return () => {\\n      clearInterval(timeoutId);\\n      window.removeEventListener(\\"resize\\", handleResize);\\n    };\\n  }, [throttleDuration]);\\n\\n  return windowSize;\\n}\\n\\nexport default useWindowSize;\\n```\\n\\n## \u591a\u4e2ahook\u8054\u7528\\n```\\nimport { useState, useEffect } from \\"react\\";\\n\\nconst breakpoints = [\\n  { name: \\"mobile\\", width: 480 },\\n  { name: \\"tablet\\", width: 768 },\\n  { name: \\"laptop\\", width: 1024 },\\n  { name: \\"desktop\\", width: 1440 },\\n];\\n\\nfunction useBreakpoint(windowWidth) {\\n  const initialBreakPoint = breakpoints.find(\\n    (breakpoint) => windowWidth <= breakpoint.width\\n  );\\n\\n  const [currentBreakpoint, setCurrentBreakpoint] = useState(\\n    initialBreakPoint?.name || \\"unknown\\"\\n  );\\n\\n  useEffect(() => {\\n    for (const breakpoint of breakpoints) {\\n      if (windowWidth <= breakpoint.width) {\\n        setCurrentBreakpoint(breakpoint.name);\\n        break;\\n      }\\n    }\\n  }, [windowWidth]);\\n\\n  return currentBreakpoint;\\n}\\n\\nexport default useBreakpoint;\\n\\nimport \\"./App.css\\";\\nimport ResponsiveContent from \\"./components/ResponsiveContent\\";\\nimport useWindowSize from \\"./hooks/useWindowSize\\";\\nimport useBreakpoint from \\"./hooks/useBreakPoint\\";\\n\\nfunction App() {\\n  const windowSize = useWindowSize(500);\\n  const breakpoint = useBreakpoint(windowSize.width); \\n  // breakpoint\u7684\u503c\u4f1a\u968f\u7740windowSize.width\u7684\u503c\u6539\u53d8\u800c\u6539\u53d8\\n  // \u8bf4\u660e\u524d\u9762hook\u7684\u8fd4\u56de\u503c\u4f1a\u53d8\u5316\uff0c\u90a3\u4e48\u540e\u9762hook\u7684\u53c2\u6570\u4e5f\u4f1a\u8ddf\u7740\u53d8\u5316\\n\\n  return (\\n    <main className=\\"container\\">\\n      <div>\\n        <h1>Width: {windowSize.width}</h1>\\n        <h1>Height: {windowSize.height}</h1>\\n        <h1>Break Point: {breakpoint}</h1>\\n      </div>\\n      <ResponsiveContent />\\n    </main>\\n  );\\n}\\n\\nexport default App;\\n\\n```"}]}')}}]);